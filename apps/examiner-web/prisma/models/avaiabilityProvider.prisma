model AvailabilityProvider {
  id String @id @default(uuid()) @db.Uuid

  /// What kind of resource this is (doctor, chaperone, interpreter, etc.)
  providerType ProviderType @map("provider_type")

  /// ID of the concrete row in its own table.
  /// - If providerType = EXAMINER  -> refId = ExaminerProfile.id
  /// - If providerType = CHAPERONE -> refId = Chaperone.id
  /// - If providerType = INTERPRETER -> refId = Interpreter.id
  /// - If providerType = TRANSPORTER -> refId = Transporter.id
  refId String @map("ref_id") @db.Uuid

  createdAt DateTime  @default(now()) @map("created_at") @db.Timestamptz()
  updatedAt DateTime  @updatedAt @map("updated_at") @db.Timestamptz()
  deletedAt DateTime? @map("deleted_at") @db.Timestamptz()

  // Availability relations
  weeklyHours   ProviderWeeklyHours[]   @relation("ProviderWeeklyHours")
  overrideHours ProviderOverrideHours[] @relation("ProviderOverrideHours")

  // Provider relations - polymorphic relationship
  // No foreign key constraints since refId can point to different tables based on providerType
  // Use application-level validation to ensure data integrity

  /// Prevents the same entity from being registered twice,
  /// even under a different type.
  @@unique([refId])
  @@map("availability_providers")
}
