
model EmailTemplate {
  id               String    @id @unique @default(uuid()) @db.Uuid
  key              String    @unique @map("key") @db.VarChar(255)
  name             String    @map("name") @db.VarChar(255)
  description      String?   @map("description") @db.Text
  isActive         Boolean   @default(false) @map("is_active")
  allowedVariables Json      @default("[]") @map("allowed_variables")
  currentVersionId String?   @unique @map("current_version_id") @db.Uuid
  createdAt        DateTime  @default(now()) @map("created_at") @db.Timestamptz()
  updatedAt        DateTime  @updatedAt @map("updated_at") @db.Timestamptz()
  deletedAt        DateTime? @map("deleted_at") @db.Timestamptz()

  versions       EmailTemplateVersion[] @relation("EmailTemplateVersions")
  currentVersion EmailTemplateVersion?  @relation("CurrentEmailTemplateVersion", fields: [currentVersionId], references: [id])

  @@index([key])
  @@map("email_templates")
}


