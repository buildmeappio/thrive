
model EmailTemplateVersion {
  id              String    @id @unique @default(uuid()) @db.Uuid
  templateId      String    @map("template_id") @db.Uuid
  version         Int       @map("version")
  subject         String    @map("subject") @db.VarChar(500)
  bodyHtml        String    @map("body_html") @db.Text
  designJson      Json      @map("design_json")
  createdByUserId String?   @map("created_by_user_id") @db.Uuid
  createdAt       DateTime  @default(now()) @map("created_at") @db.Timestamptz()
  deletedAt       DateTime? @map("deleted_at") @db.Timestamptz()

  template      EmailTemplate @relation("EmailTemplateVersions", fields: [templateId], references: [id], onDelete: Cascade)
  currentParent EmailTemplate? @relation("CurrentEmailTemplateVersion")

  @@unique([templateId, version])
  @@index([templateId])
  @@map("email_template_versions")
}


