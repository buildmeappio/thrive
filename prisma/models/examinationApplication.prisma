model ExaminerApplication {
  id                  String  @id @default(uuid()) @db.Uuid
  // Personal Information
  firstName           String? @map("first_name") @db.VarChar(255)
  lastName            String? @map("last_name") @db.VarChar(255)
  email               String  @unique @map("email") @db.VarChar(255)
  phone               String? @map("phone") @db.VarChar(255)
  provinceOfResidence String  @map("province_of_residence") @db.VarChar(255)
  mailingAddress      String  @map("mailing_address") @db.Text
  addressId           String? @map("address_id") @db.Uuid
  landlineNumber      String? @map("landline_number") @db.VarChar(255)

  // Medical Credentials
  specialties               String[]  @map("specialties")
  licenseNumber             String    @map("license_number") @db.VarChar(255)
  provinceOfLicensure       String?   @map("province_of_licensure") @db.VarChar(255)
  licenseExpiryDate         DateTime? @map("license_expiry_date") @db.Date
  medicalLicenseDocumentIds String[]  @map("medical_license_document_ids")

  // Documents
  resumeDocumentId            String? @map("resume_document_id") @db.Uuid
  NdaDocumentId               String? @map("nda_document_id") @db.Uuid
  insuranceDocumentId         String? @map("insurance_document_id") @db.Uuid
  redactedIMEReportDocumentId String? @map("redacted_ime_report_document_id") @db.Uuid

  // IME Background
  isForensicAssessmentTrained Boolean  @map("is_forensic_assessment_trained")
  yearsOfIMEExperience        String   @map("years_of_ime_experience") @db.VarChar(255)
  imesCompleted               String?  @map("imes_completed") @db.VarChar(50)
  currentlyConductingIMEs     Boolean? @map("currently_conducting_imes")
  insurersOrClinics           String?  @map("insurers_or_clinics") @db.Text
  assessmentTypeIds           String[] @map("assessment_type_ids")
  assessmentTypeOther         String?  @map("assessment_type_other") @db.VarChar(255)
  experienceDetails           String?  @map("experience_details") @db.Text

  // Languages
  languagesSpoken String[] @map("languages_spoken")

  // Consent
  isConsentToBackgroundVerification Boolean @map("is_consent_to_background_verification")
  agreeToTerms                      Boolean @map("agree_to_terms")

  // Application Status
  status                       ExaminerStatus @default(SUBMITTED) @map("status")
  approvedBy                   String?        @map("approved_by") @db.Uuid
  approvedAt                   DateTime?      @map("approved_at") @db.Timestamptz()
  rejectedBy                   String?        @map("rejected_by") @db.Uuid
  rejectedAt                   DateTime?      @map("rejected_at") @db.Timestamptz()
  rejectedReason               String?        @map("rejected_reason") @db.Text
  contractSignedByExaminerAt   DateTime?      @map("contract_signed_by_examiner_at") @db.Timestamptz()
  contractConfirmedByAdminAt   DateTime?      @map("contract_confirmed_by_admin_at") @db.Timestamptz()
  contractDeclinedByExaminerAt DateTime?      @map("contract_declined_by_examiner_at") @db.Timestamptz()
  contractDeclinedByAdminAt    DateTime?      @map("contract_declined_by_admin_at") @db.Timestamptz()
  contractDeclineReason        String?        @map("contract_decline_reason") @db.Text

  // Fee Structure (stored temporarily until examiner profile is created)
  IMEFee          Decimal? @map("ime_fee") @db.Decimal(10, 2)
  recordReviewFee Decimal? @map("record_review_fee") @db.Decimal(10, 2)
  hourlyRate      Decimal? @map("hourly_rate") @db.Decimal(10, 2)
  cancellationFee Decimal? @map("cancellation_fee") @db.Decimal(10, 2)
  paymentTerms    String?  @map("payment_terms") @db.Text

  createdAt DateTime  @default(now()) @map("created_at") @db.Timestamptz()
  updatedAt DateTime  @updatedAt @map("updated_at") @db.Timestamptz()
  deletedAt DateTime? @map("deleted_at") @db.Timestamptz()

  address                   Address?                @relation("ExaminerApplicationAddress", fields: [addressId], references: [id])
  resumeDocument            Documents?              @relation(name: "ExaminerApplicationResumeDocument", references: [id], fields: [resumeDocumentId])
  ndaDocument               Documents?              @relation(name: "ExaminerApplicationNDADocument", references: [id], fields: [NdaDocumentId])
  insuranceDocument         Documents?              @relation(name: "ExaminerApplicationInsuranceDocument", references: [id], fields: [insuranceDocumentId])
  redactedIMEReportDocument Documents?              @relation(name: "ExaminerApplicationRedactedIMEReportDocument", references: [id], fields: [redactedIMEReportDocumentId])
  examinerProfile           ExaminerProfile?        @relation("ExaminerApplicationProfile")
  contracts                 Contract[]              @relation("ApplicationContracts")
  secureLinks               ApplicationSecureLink[] @relation("ApplicationSecureLink")
  interviewSlots            InterviewSlot[]         @relation("ApplicationInterviewSlot")

  @@index([email])
  @@index([status])
  @@map("examiner_applications")
}
