model User {
  id                        String      @id @unique @default(uuid()) @db.Uuid
  firstName                 String      @map("first_name") @db.VarChar(255)
  lastName                  String      @map("last_name") @db.VarChar(255)
  email                     String      @unique @map("email") @db.VarChar(255)
  password                  String?     @map("password") @db.VarChar(255)
  phone                     String?     @map("phone") @db.VarChar(255)
  gender                    String?     @map("gender") @db.VarChar(255)
  dateOfBirth               DateTime?   @map("date_of_birth") @db.Timestamptz()
  profilePhotoId            String?     @map("profile_photo_id") @db.Uuid
  mustResetPassword         Boolean     @default(false) @map("must_reset_password")
  temporaryPasswordIssuedAt DateTime?   @map("temporary_password_issued_at") @db.Timestamptz()
  status                    UserStatus? @default(PENDING) @map("status")
  userType                  UserType?   @map("user_type")
  organizationId            String?     @map("organization_id") @db.Uuid

  profilePhoto Documents? @relation(name: "ProfilePhoto", fields: [profilePhotoId], references: [id])
  organization Organization? @relation(fields: [organizationId], references: [id])

  createdAt           DateTime            @default(now()) @map("created_at") @db.Timestamptz()
  updatedAt           DateTime            @updatedAt @map("updated_at") @db.Timestamptz()
  deletedAt           DateTime?           @map("deleted_at") @db.Timestamptz()
  accounts            Account[]           @relation("AccountUser")
  messageReadStatuses MessageReadStatus[]
  groupMembers        GroupMember[]
  userRoleGrants      UserRoleGrant[]
  userLocationMembership UserLocationMembership?
  userPrimaryRole     UserPrimaryRole?
  grantedRoleGrants   UserRoleGrant[]     @relation("UserRoleGrantGrantedBy")
  createdGroups       Group[]             @relation("GroupCreatedBy")
  auditEvents         AuditEvent[]        @relation("AuditEventActor")

  @@index([organizationId, email])
  @@index([organizationId])
  @@map("users")
}
